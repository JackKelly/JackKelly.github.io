import{s as oe}from"./chunk-LvLJmgfZ.js";import{d as be,l as we,n as T,p as ae,u as Ne}from"./useEvent-BhXAndur.js";import{t as ye}from"./react-Bj1aDYRI.js";import{P as ke,T as ze,Zr as Ce,_n as Se,ai as Oe,oi as n,__tla as Ae}from"./cells-BvQJ_wGv.js";import"./react-dom-CSu739Rf.js";import{t as se}from"./compiler-runtime-B3qBwwSJ.js";import"./tooltip-DuBjDOOi.js";import{h as ie}from"./useEventListener-B3HCnU20.js";import{y as Ie}from"./utils-Cul5vKXJ.js";import{t as Pe}from"./constants-B6Cb__3x.js";import{t as Le}from"./jsx-runtime-BttUhiRM.js";import{t as z}from"./button-DOOm_ggu.js";import{t as le}from"./cn-BfqzeB_k.js";import"./dist-m6mzfYjs.js";import{n as Me,__tla as Ee}from"./JsonOutput-Cf8A51yY.js";import"./cjs-BFk44HyO.js";import"./main-Drs5hZkn.js";import"./useNonce-CGCAoh-I.js";import{r as Re}from"./requests-DqPjMMrg.js";import{t as me}from"./createLucideIcon-C5NDK5NL.js";import{d as De,__tla as He}from"./layout-W7LHtlpD.js";import{n as Te,t as Ve,__tla as qe}from"./LazyAnyLanguageCodeMirror-Bd0XX4es.js";import"./download-FoG6dAm7.js";import"./markdown-renderer-Dyy86-0S.js";import{u as Ge}from"./toDate-D_5B1mPf.js";import{t as Ue,__tla as Ze}from"./cell-editor-DW3vX0Hr.js";import{t as Be}from"./play-BqVslMWT.js";import{t as Fe}from"./spinner-BBkRPIE-.js";import"./dist-Sapk1n6W.js";import"./dist-DAxpo7DH.js";import"./dist-Dw5p3QBM.js";import"./dist-ChjglRRU.js";import"./dist-Dq6dViu8.js";import"./session-BH_ggR75.js";import{r as Je}from"./useTheme-BHn95Ieq.js";import"./Combination-CdkqT4eF.js";import{t as C}from"./tooltip-D13BIptq.js";import"./dates-CeHtKOEz.js";import"./popover-Ds94yD5w.js";import"./vega-loader.browser-BR6dmQ_3.js";import"./defaultLocale-YxeC1tYk.js";import"./defaultLocale-BgG6rTtO.js";import"./purify.es-CPiHmTAE.js";import{__tla as Ke}from"./chunk-5FQGJX7Z-BuHQ2zZJ.js";import"./katex-bTFStUqL.js";import"./html-to-image-DvPYLUI8.js";import{o as Qe}from"./focus-CPRFg4kn.js";import{a as We}from"./renderShortcut-DpJiiIXp.js";import"./esm-CP9RsJ4O.js";import{n as Xe,r as Ye,t as ne}from"./react-resizable-panels.browser.esm-DzNEmH2W.js";import"./name-cell-input-Cga4BASx.js";import{n as $e,r as et}from"./panel-context-Dt_6WOwy.js";import"./Inputs-fHea2UE1.js";import{__tla as tt}from"./loro_wasm_bg-CDlYurK8.js";import"./ws-BZQmQxZ7.js";import"./dist-B3moP5J0.js";import"./dist-bE7sV_bx.js";import"./dist-B9UvQEKY.js";import"./dist-CaKf4gjo.js";import"./dist-CkDKNI-t.js";import"./dist-D-SgQKH_.js";import"./dist-BGl4L4Qw.js";import"./dist-BKGFUG98.js";import"./dist-DXEbN9dc.js";import"./esm-DPool9PJ.js";import{t as rt}from"./kiosk-mode-DChTDQjX.js";let ce,ot=Promise.all([(()=>{try{return Ae}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return He}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return tt}catch{}})()]).then(async()=>{var de=me("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),he=me("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),pe=se(),V=oe(ye(),1),ue=15;const q=Ce("marimo:scratchpadHistory:v1",[],Se),fe=ae(!1),xe=ae(null,(e,s,i)=>{if(i=i.trim(),!i)return;let m=e(q);s(q,[i,...m.filter(c=>c!==i)].slice(0,ue))});var t=oe(Le(),1),_e={hide_code:!1,disabled:!1};const ve=()=>{var re;let e=(0,pe.c)(60),s=ke(),[i]=Ie(),{theme:m}=Je(),c=(0,V.useRef)(null),G=Qe(),{createNewCell:U,updateCellCode:d}=ze(),{sendRunScratchpad:h}=Re(),S=$e(),Z=et(),l=s.cellRuntime[n],B=l==null?void 0:l.output,O=l==null?void 0:l.status,F=l==null?void 0:l.consoleOutputs,r=((re=s.cellData.__scratch__)==null?void 0:re.code)??"",J=be(xe),[a,p]=we(fe),u=Ne(q),A;e[0]!==J||e[1]!==r||e[2]!==h?(A=()=>{h({code:r}),J(r)},e[0]=J,e[1]=r,e[2]=h,e[3]=A):A=e[3];let f=T(A),I;e[4]!==r||e[5]!==U||e[6]!==G?(I=()=>{r.trim()&&U({code:r,before:!1,cellId:G??"__end__"})},e[4]=r,e[5]=U,e[6]=G,e[7]=I):I=e[7];let K=T(I),P;e[8]!==h||e[9]!==d?(P=()=>{d({cellId:n,code:"",formattingChange:!1}),h({code:""});let o=c.current;o&&o.dispatch({changes:{from:0,to:o.state.doc.length,insert:""}})},e[8]=h,e[9]=d,e[10]=P):P=e[10];let Q=T(P),L;e[11]!==p||e[12]!==d?(L=o=>{p(!1),d({cellId:n,code:o,formattingChange:!1});let k=c.current;k&&k.dispatch({changes:{from:0,to:k.state.doc.length,insert:o}})},e[11]=p,e[12]=d,e[13]=L):L=e[13];let W=T(L),[X,je]=(0,V.useState)(),M;e[14]!==W||e[15]!==u||e[16]!==a||e[17]!==m?(M=()=>a?(0,t.jsx)("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:(0,t.jsx)("div",{className:"overflow-auto flex flex-col gap-3",children:u.map((o,k)=>(0,t.jsx)("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>W(o),children:(0,t.jsx)(V.Suspense,{children:(0,t.jsx)(Ve,{language:"python",theme:m,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:o.trim(),editable:!1,readOnly:!0})})},k))})}):null,e[14]=W,e[15]=u,e[16]=a,e[17]=m,e[18]=M):M=e[18];let Y=M,E;e[19]!==Q||e[20]!==K||e[21]!==f||e[22]!==u.length||e[23]!==a||e[24]!==p||e[25]!==O?(E=()=>(0,t.jsxs)("div",{className:"flex items-center shrink-0 border-b",children:[(0,t.jsx)(C,{content:We("cell.run"),children:(0,t.jsx)(z,{"data-testid":"scratchpad-run-button",onClick:f,disabled:a,variant:"text",size:"xs",children:(0,t.jsx)(Be,{color:"var(--grass-11)",size:16})})}),(0,t.jsx)(C,{content:"Clear code and outputs",children:(0,t.jsx)(z,{disabled:a,size:"xs",variant:"text",onClick:Q,children:(0,t.jsx)(de,{size:16})})}),(0,t.jsx)(rt,{children:(0,t.jsx)(C,{content:"Insert code",children:(0,t.jsx)(z,{disabled:a,size:"xs",variant:"text",onClick:K,children:(0,t.jsx)(Te,{size:16})})})}),(O==="running"||O==="queued")&&(0,t.jsx)(Fe,{className:"inline",size:"small"}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(C,{content:"Toggle history",children:(0,t.jsx)(z,{size:"xs",variant:"text",className:le(a&&"bg-(--sky-3) rounded-none"),onClick:()=>p(!a),disabled:u.length===0,children:(0,t.jsx)(he,{size:16})})}),(0,t.jsx)(C,{content:(0,t.jsx)("span",{className:"block max-w-prose",children:"Use this scratchpad to experiment with code without restrictions on variable names. Variables defined here aren't saved to notebook memory, and the code is not saved in the notebook file."}),children:(0,t.jsx)(z,{size:"xs",variant:"text",children:(0,t.jsx)(Ge,{size:16})})})]}),e[19]=Q,e[20]=K,e[21]=f,e[22]=u.length,e[23]=a,e[24]=p,e[25]=O,e[26]=E):E=e[26];let $=E,ge=S==="vertical",R;e[27]===Symbol.for("react.memo_cache_sentinel")?(R=Oe.create(n),e[27]=R):R=e[27];let x;e[28]===$?x=e[29]:(x=$(),e[28]=$,e[29]=x);let D;e[30]===Symbol.for("react.memo_cache_sentinel")?(D=o=>{c.current=o},e[30]=D):D=e[30];let _;e[31]!==r||e[32]!==f||e[33]!==X||e[34]!==m||e[35]!==i?(_=(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsx)(Ue,{theme:m,showPlaceholder:!1,id:n,code:r,config:_e,status:"idle",serializedEditorState:null,runCell:f,userConfig:i,editorViewRef:c,setEditorView:D,hidden:!1,showHiddenCode:ie.NOOP,languageAdapter:X,setLanguageAdapter:je})}),e[31]=r,e[32]=f,e[33]=X,e[34]=m,e[35]=i,e[36]=_):_=e[36];let v;e[37]===Y?v=e[38]:(v=Y(),e[37]=Y,e[38]=v);let j;e[39]!==v||e[40]!==x||e[41]!==_?(j=(0,t.jsx)(ne,{defaultSize:40,minSize:20,maxSize:70,children:(0,t.jsxs)("div",{className:"h-full flex flex-col overflow-hidden relative",children:[x,_,v]})}),e[39]=v,e[40]=x,e[41]=_,e[42]=j):j=e[42];let ee=ge?"h-1":"w-1",g;e[43]===ee?g=e[44]:(g=le("bg-border hover:bg-primary/50 transition-colors",ee),e[43]=ee,e[44]=g);let b;e[45]===g?b=e[46]:(b=(0,t.jsx)(Ye,{className:g}),e[45]=g,e[46]=b);let w;e[47]===B?w=e[48]:(w=(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsx)(Me,{allowExpand:!1,output:B,className:Pe.outputArea,cellId:n,stale:!1,loading:!1})}),e[47]=B,e[48]=w);let N;e[49]===F?N=e[50]:(N=(0,t.jsx)("div",{className:"overflow-auto shrink-0 max-h-[50%]",children:(0,t.jsx)(De,{consoleOutputs:F,className:"overflow-auto",stale:!1,cellName:"_",onSubmitDebugger:ie.NOOP,cellId:n,debuggerActive:!1})}),e[49]=F,e[50]=N);let y;e[51]!==w||e[52]!==N?(y=(0,t.jsx)(ne,{defaultSize:60,minSize:20,children:(0,t.jsxs)("div",{className:"h-full flex flex-col divide-y overflow-hidden",children:[w,N]})}),e[51]=w,e[52]=N,e[53]=y):y=e[53];let H;return e[54]!==S||e[55]!==Z||e[56]!==j||e[57]!==b||e[58]!==y?(H=(0,t.jsx)("div",{className:"flex flex-col h-full overflow-hidden",id:R,children:(0,t.jsxs)(Xe,{direction:S,className:"h-full",children:[j,b,y]},Z)}),e[54]=S,e[55]=Z,e[56]=j,e[57]=b,e[58]=y,e[59]=H):H=e[59],H};let te;te=se(),ce=()=>{let e=(0,te.c)(1),s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)(ve,{}),e[0]=s):s=e[0],s}});export{ot as __tla,ce as default};
