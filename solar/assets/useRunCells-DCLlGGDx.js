import{d as b,n as i,p as g}from"./useEvent-BhXAndur.js";import{Sn as k,T as v,at as y,br as F,h as d,wr as x}from"./cells-BvQJ_wGv.js";import{t as D}from"./compiler-runtime-B3qBwwSJ.js";import{m as H}from"./useEventListener-B3HCnU20.js";import{o as S}from"./dist-DvlYinQM.js";import{r as T}from"./requests-DqPjMMrg.js";var u=D();const w=g(!1);function V(){let r=(0,u.c)(2),n=f(),t;return r[0]===n?t=r[1]:(t=()=>n(x(d())),r[0]=n,r[1]=t),i(t)}function _(r){let n=(0,u.c)(3),t=f(),o;return n[0]!==r||n[1]!==t?(o=()=>{r!==void 0&&t([r])},n[0]=r,n[1]=t,n[2]=o):o=n[2],i(o)}function j(){let r=(0,u.c)(2),n=f(),t;return r[0]===n?t=r[1]:(t=()=>n(F(d())),r[0]=n,r[1]=t),i(t)}function f(){let r=(0,u.c)(4),{prepareForRun:n}=v(),{sendRun:t}=T(),o=b(w),e;return r[0]!==n||r[1]!==t||r[2]!==o?(e=async s=>{if(s.length===0)return;let c=d();return o(!0),I({cellIds:s,sendRun:t,prepareForRun:n,notebook:c})},r[0]=n,r[1]=t,r[2]=o,r[3]=e):e=r[3],i(e)}async function I({cellIds:r,sendRun:n,prepareForRun:t,notebook:o}){var m,h,R;if(r.length===0)return;let{cellHandles:e,cellData:s}=o,c=[];for(let a of r){let l=(h=(m=e[a])==null?void 0:m.current)==null?void 0:h.editorView,p;l?(k(l)!=="markdown"&&S(l),p=y(l)):p=((R=s[a])==null?void 0:R.code)||"",c.push(p),t({cellId:a})}await n({cellIds:r,codes:c}).catch(a=>{H.error(a)})}export{f as a,_ as i,I as n,V as o,j as r,w as t};
