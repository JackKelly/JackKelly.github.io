---
title: "GNUplot"
date: 2011-07-17 16:47:13 +0000
categories: ["LaTeX", "GNUplot", "diagrams", "graphs", "data visualisation"]
permalink: /gnuplot
---
Notes on using GNUplot

### Outputting from GNUplot to PDFLaTeX

In gnuplot:

<div class="geshifilter">

``` {.gnuplot .geshifilter-gnuplot style="font-family:monospace;"}
set format "$%g$";
set terminal epslatex colour solid size 15cm, 10cm
 
fileBase = "graph" # DO NOT USE UNDERSCORES!!!
texFileName = fileBase.".tex"
epsFileName = fileBase.".eps"
set output texFileName
 
… plot etc...
unset output # forces buffer to flush
 
# Convert to PDF and delete the EPS file
system(sprintf("epstopdf %s && rm %s", epsFileName, epsFileName))
```

</div>

This will output 2 files: <span class="geshifilter">`graph.tex`{.text
.geshifilter-text}</span> and <span
class="geshifilter">`graph.pdf`{.text .geshifilter-text}</span>. (The
"standard" technique is to let GNUplot output an EPS file and then use
<span class="geshifilter">`\usepackage{epstopdf}`{.text
.geshifilter-text}</span> in the LaTeX preamble to convert the EPS file
to PDF. But this appears rather broken in LyX &gt;= 2.0.1. The tidiest
solution would probably be to use the <span
class="geshifilter">`cairolatex`{.text .geshifilter-text}</span> output
terminal in GNUplot 4.6 (released March 2012) but GNUplot 4.6 isn't
available on our college machines yet (I could manually install it to my
own directory but that feels rather ugly). [It looks like GNUplot 4.6
will be included in Ubuntu
12.10](https://launchpad.net/ubuntu/quantal/+source/gnuplot).) Exit
gnuplot before opening the .tex file or run <span
class="geshifilter">`unset output`{.text .geshifilter-text}</span>!
(Otherwise it won’t have finished emptying buffer!) (many more options
listed in the epslatex section of the gnuplot documentation) In the
LaTeX document:

<div class="geshifilter">

``` {.latex .geshifilter-latex style="font-family:monospace;"}
\usepackage{graphicx}
…
\input{graph.tex}
```

</div>

Compile with: <span
class="geshifilter">`pdflatex --shell-escape LaTeXdoc.tex`{.bash
.geshifilter-bash}</span> There’s some more help here:
http://en.wikibooks.org/wiki/LaTeX/Tips\_and\_Tricks\#Graphs\_with\_gnuplot

#### Settings in Lyx

1.  Insert the <span class="geshifilter">`\input{graph.tex}`{.text
    .geshifilter-text}</span> using Insert &gt; TeX code (ctrl-L)
2.  See [this forum
    thread](http://tex.stackexchange.com/questions/16366/lyx-how-to-add-command-line-option-flag-for-latex-compiling)
    for how to set <span class="geshifilter">`--shell-escape`{.text
    .geshifilter-text}</span>
3.  Set the \\usepackage lines in Document &gt; Settings &gt; LaTeX
    Preamble


